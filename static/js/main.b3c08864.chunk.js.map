{"version":3,"sources":["context/SocketContext.jsx","context/RTCPeerContext.jsx","styles/videoPlayerStyles.js","components/VideoPlayer.jsx","assets/constants.js","styles/videoDetailsStyles.js","components/VideoDetails.jsx","styles/headerStyles.js","styles/liveChatStyles.js","components/Header.jsx","styles/appStyles.js","App.js","reportWebVitals.js","styles/globalStyles.js","index.js"],"names":["SocketContext","createContext","socketReducer","state","action","type","socket","WebSocket","url","timeout","wsTimeoutDuration","connectTimeout","clearTimeout","initialState","SocketProvider","children","useReducer","dispatch","useEffect","fetch","response","json","data","Object","prototype","hasOwnProperty","call","wsUrl","console","error","message","onopen","log","onclose","e","reason","Math","min","setTimeout","readyState","CLOSED","onerror","close","value","Provider","RTCContext","RTCProvider","useState","RTCPeerConnection","pc","Video","styled","video","VideoPlayer","src","videoRef","useRef","current","srcObject","ref","playsInline","autoPlay","controls","muted","poster","VideoDetailsContainer","div","DetailHeadingBox","DetailsTitle","DetailsTop","ViewerTag","h4","AlphaTag","VideoDetails","viewers","className","MainHeader","header","HeaderLogoContainer","Header","MainContainer","VideoContainer","appReducer","stream","App","context","useContext","Error","useRTC","useSocket","addTransceiver","direction","ontrack","event","kind","track","streams","onicecandidate","candidate","send","JSON","stringify","onmessage","msg","parse","offerCandidate","setRemoteDescription","createAnswer","answer","setLocalDescription","addIceCandidate","no_connections","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","GlobalStyle","createGlobalStyle","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b3c08864.chunk.js","sourcesContent":["import React, { createContext, useContext, useEffect, useReducer } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport const SocketContext = createContext();\r\n\r\nconst socketReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"initSocket\": {\r\n      return {\r\n        ...state,\r\n        socket: new WebSocket(action.url),\r\n        url: action.url,\r\n      };\r\n    }\r\n    case \"renewSocket\": {\r\n      let timeout = state.wsTimeoutDuration * 2;\r\n      if (timeout > 10000) {\r\n        timeout = 10000;\r\n      }\r\n      return {\r\n        ...state,\r\n        socket: new WebSocket(state.url),\r\n        wsTimeoutDuration: timeout,\r\n      };\r\n    }\r\n    case \"updateTimeout\": {\r\n      return { ...state, connectTimeout: action.timeout };\r\n    }\r\n    case \"clearTimeout\": {\r\n      clearTimeout(state.connectTimeout);\r\n      return { ...state };\r\n    }\r\n    case \"resetTimeoutDuration\": {\r\n      return { ...state, wsTimeoutDuration: 250 };\r\n    }\r\n    default: {\r\n      return { ...state };\r\n    }\r\n  }\r\n};\r\n\r\nconst initialState = {\r\n  url: \"\",\r\n  socket: null,\r\n  wsTimeoutDuration: 250,\r\n  connectTimeout: null,\r\n};\r\n\r\nconst SocketProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(socketReducer, initialState);\r\n\r\n  const { socket, wsTimeoutDuration } = state;\r\n\r\n  useEffect(() => {\r\n    // run once on first render\r\n    (async () => {\r\n      try {\r\n        const response = await fetch(\"config.json\");\r\n        const data = await response.json();\r\n        if (Object.prototype.hasOwnProperty.call(data, \"wsUrl\")) {\r\n          dispatch({\r\n            type: \"initSocket\",\r\n            url: data.wsUrl,\r\n          });\r\n        } else {\r\n          console.error(\"config.json is invalid\");\r\n        }\r\n      } catch (e) {\r\n        console.error(e.message);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!socket) return;\r\n\r\n    socket.onopen = () => {\r\n      dispatch({ type: \"resetTimeout\" });\r\n      dispatch({ type: \"resetTimeoutDuration\" });\r\n      console.log(\"Connected to websocket\");\r\n    };\r\n\r\n    socket.onclose = (e) => {\r\n      const { reason } = e;\r\n      console.log(\r\n        `Socket is closed. Reconnect will be attempted in ${Math.min(\r\n          wsTimeoutDuration / 1000\r\n        )} second. ${reason}`\r\n      );\r\n\r\n      const timeout = setTimeout(() => {\r\n        //check if websocket instance is closed, if so renew connection\r\n        if (!socket || socket.readyState === WebSocket.CLOSED) {\r\n          dispatch({ type: \"renewSocket\" });\r\n        }\r\n      }, wsTimeoutDuration);\r\n\r\n      dispatch({\r\n        type: \"updateTimeout\",\r\n        timeout,\r\n      });\r\n    };\r\n\r\n    // err argument does not have any useful information about the error\r\n    socket.onerror = () => {\r\n      console.error(`Socket encountered error. Closing socket.`);\r\n      socket.close();\r\n    };\r\n  }, [socket]);\r\n\r\n  const value = {\r\n    socket: state.socket,\r\n  };\r\n\r\n  return (\r\n    <SocketContext.Provider value={value}>{children}</SocketContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useSocket = () => {\r\n  const context = useContext(SocketContext);\r\n\r\n  if (!context) {\r\n    throw new Error(\"useSocket must be nested in SocketProvider\");\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\nexport default SocketProvider;\r\n\r\nSocketProvider.propTypes = {\r\n  children: PropTypes.object,\r\n};\r\n","import React, { createContext, useContext, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport const RTCContext = createContext();\r\n\r\nconst RTCProvider = ({ children }) => {\r\n  const [pc] = useState(new RTCPeerConnection());\r\n\r\n  const value = {\r\n    pc,\r\n  };\r\n\r\n  return <RTCContext.Provider value={value}>{children}</RTCContext.Provider>;\r\n};\r\n\r\nexport const useRTC = () => {\r\n  const context = useContext(RTCContext);\r\n\r\n  if (!context) {\r\n    throw new Error(\"useRTC must be nested in RTCProvider\");\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\nexport default RTCProvider;\r\n\r\nRTCProvider.propTypes = {\r\n  children: PropTypes.object,\r\n};\r\n","import styled from \"styled-components\";\r\n\r\nexport const Video = styled.video`\r\n  border-radius: 0px;\r\n  z-index: 10;\r\n  width: 100%;\r\n`;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { VideoPosterURL } from \"../assets/constants\";\r\nimport { Video } from \"../styles/videoPlayerStyles\";\r\n\r\nconst VideoPlayer = ({ src }) => {\r\n  const videoRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (src) {\r\n      videoRef.current.srcObject = src;\r\n    }\r\n  }, [src]);\r\n\r\n  return (\r\n    <Video\r\n      ref={videoRef}\r\n      playsInline\r\n      autoPlay\r\n      controls\r\n      muted\r\n      poster={VideoPosterURL}\r\n    ></Video>\r\n  );\r\n};\r\n\r\nexport default VideoPlayer;\r\n\r\nVideoPlayer.propTypes = {\r\n  src: PropTypes.object,\r\n};\r\n","export const LightspeedLogoURL = \"/images/lightspeedlogo.svg\";\r\nexport const VideoPosterURL = \"/images/videoPoster.jpg\";\r\n","import styled from \"styled-components\";\r\n\r\nexport const VideoDetailsContainer = styled.div `\r\n  width: 100%;\r\n  background-color: #242731;\r\n  text-align: left;\r\n  padding-top: 4em;\r\n  margin-top: -3em;\r\n  border-radius: 32px;\r\n`;\r\n\r\nexport const DetailHeadingBox = styled.div `\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  margin: 0 2em 3em 2em;\r\n\r\n  img {\r\n    height: 130px;\r\n    width: 130px;\r\n    \r\n\r\n    @media only screen and (max-width: 1024px) {\r\n      display: none;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const DetailsTitle = styled.div `\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n`;\r\n\r\nexport const DetailsTop = styled.div `\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  margin-bottom: 1rem;\r\n  padding-left: 2rem;\r\n`;\r\n\r\nexport const DetailsHeading = styled.h4 `\r\n  font-size: 30px;\r\n`;\r\nexport const ViewerTag = styled.div `\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-evenly;\r\n  height: 35px;\r\n  width: 110px;\r\n  \r\n\r\n  border-radius: 8px;\r\n\r\n  i {\r\n    margin: auto 0;\r\n  }\r\n\r\n  span {\r\n    margin: auto 0;\r\n    font-weight: 600;\r\n  }\r\n`;\r\nexport const AlphaTag = styled.div `\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-evenly;\r\n  height: 35px;\r\n  width: 110px;\r\n  text-align: center;\r\n  background-color: #ff754c;\r\n  border-radius: 8px;\r\n\r\n  i {\r\n    margin: auto 0;\r\n  }\r\n\r\n  span {\r\n    margin: auto 0;\r\n  }\r\n`;","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {\r\n  DetailHeadingBox,\r\n  VideoDetailsContainer,\r\n  DetailsTitle,\r\n  DetailsHeading,\r\n  DetailsTop,\r\n  AlphaTag,\r\n  ViewerTag,\r\n} from \"../styles/videoDetailsStyles\";\r\nimport { LightspeedLogoURL } from \"../assets/constants\";\r\n\r\nconst VideoDetails = ({ viewers }) => {\r\n  return (\r\n    <VideoDetailsContainer>\r\n      <DetailsTop>\r\n        <AlphaTag>\r\n          <i className=\"fas fa-construction badge-icon\"></i>\r\n          <span>Alpha</span>\r\n        </AlphaTag>\r\n        <ViewerTag>\r\n          <i className=\"fas fa-user-friends\"></i>\r\n          <span>{viewers}</span>\r\n        </ViewerTag>\r\n      </DetailsTop>\r\n      <DetailHeadingBox>\r\n        <DetailsTitle>\r\n        </DetailsTitle>\r\n      </DetailHeadingBox>\r\n    </VideoDetailsContainer>\r\n  );\r\n};\r\n\r\nexport default VideoDetails;\r\n\r\nVideoDetails.propTypes = {\r\n  viewers: PropTypes.number,\r\n};\r\n","import styled from \"styled-components\";\r\n\r\nexport const MainHeader = styled.header`\r\n  background: #1f2128;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border: 0.5px solid rgba(240, 243, 246, 0.1);\r\n  padding: 1em;\r\n`;\r\n\r\nexport const HeaderLogoContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n\r\n  h1 {\r\n    font-weight: 600;\r\n    font-size: 2em;\r\n    color: white;\r\n  }\r\n\r\n  img {\r\n    height: 90px;\r\n    margin: auto;\r\n  }\r\n`;\r\n","import styled from \"styled-components\";\r\n\r\nexport const ChatContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n  color: #fff;\r\n  margin: 0 2.5em;\r\n  min-width: 25em;\r\n\r\n  @media only screen and (max-width: 1024px) {\r\n    margin: 1em 0.3em;\r\n    min-width: unset;\r\n  }\r\n`;\r\n\r\nexport const ChatMain = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  width: 100%;\r\n  background: #242731;\r\n  border: 0.5px solid rgba(240, 243, 246, 0.2);\r\n  border-radius: 32px;\r\n`;\r\n\r\nexport const ChatHeading = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0 2rem;\r\n\r\n  h6 {\r\n    margin: 1em 0;\r\n  }\r\n\r\n  .arrow {\r\n    margin-top: auto;\r\n    margin-bottom: auto;\r\n    transform: rotate(45deg);\r\n  }\r\n`;\r\n\r\nexport const ChatBody = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  height: 100%;\r\n  justify-content: center;\r\n  border-top: 0.5px solid rgba(240, 243, 246, 0.1);\r\n  border-radius: 32px;\r\n\r\n  i {\r\n    font-weight: 900px;\r\n  }\r\n\r\n  @media only screen and (max-width: 1024px) {\r\n    min-height: 300px;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { HeaderLogoContainer, MainHeader } from \"../styles/headerStyles\";\r\nimport { LightspeedLogoURL } from \"../assets/constants\";\r\n\r\nconst Header = () => {\r\n  return (\r\n    <MainHeader>\r\n      <HeaderLogoContainer>\r\n        <h1>Red Agency Radio</h1>\r\n      </HeaderLogoContainer>\r\n    </MainHeader>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import styled from \"styled-components\";\r\n\r\nexport const MainContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-evenly;\r\n  margin: 2em;\r\n\r\n  @media only screen and (max-width: 1024px) {\r\n    margin: 1.5em 0;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-evenly;\r\n  }\r\n`;\r\n\r\nexport const VideoContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  color: #fff;\r\n  margin: 0 2.5em;\r\n\r\n  @media only screen and (max-width: 1024px) {\r\n    margin: 0.3em;\r\n  }\r\n`;\r\n","import \"./App.css\";\nimport React, { useEffect, useReducer } from \"react\";\nimport { useSocket } from \"./context/SocketContext\";\nimport { useRTC } from \"./context/RTCPeerContext\";\nimport VideoPlayer from \"./components/VideoPlayer\";\nimport VideoDetails from \"./components/VideoDetails\";\nimport LiveChat from \"./components/LiveChat\";\nimport Header from \"./components/Header\";\nimport { VideoContainer, MainContainer } from \"./styles/appStyles\";\n\nconst appReducer = (state, action) => {\n  switch (action.type) {\n    case \"initStream\": {\n      return { ...state, stream: action.stream };\n    }\n    case \"info\": {\n      return { ...state, viewers: action.viewers };\n    }\n\n    default: {\n      return { ...state };\n    }\n  }\n};\n\nconst initialState = {\n  stream: null,\n  viewers: null,\n};\n\nconst App = () => {\n  const [state, dispatch] = useReducer(appReducer, initialState);\n  const { pc } = useRTC();\n  const { socket } = useSocket();\n\n  // Offer to receive 1 audio, and 1 video tracks\n  pc.addTransceiver(\"audio\", { direction: \"recvonly\" });\n  // pc.addTransceiver('video', { 'direction': 'recvonly' })\n  pc.addTransceiver(\"video\", { direction: \"recvonly\" });\n\n  pc.ontrack = (event) => {\n    const {\n      track: { kind },\n      streams,\n    } = event;\n\n    if (kind === \"video\") {\n      dispatch({ type: \"initStream\", stream: streams[0] });\n    }\n  };\n\n  pc.onicecandidate = (e) => {\n    const { candidate } = e;\n    if (candidate) {\n      console.log(\"Candidate success\");\n      socket.send(\n        JSON.stringify({\n          event: \"candidate\",\n          data: e.candidate,\n        })\n      );\n    }\n  };\n\n  if (socket) {\n    socket.onmessage = async (event) => {\n      const msg = JSON.parse(event.data);\n\n      if (!msg) {\n        console.log(\"Failed to parse msg\");\n        return;\n      }\n\n      const offerCandidate = msg.data;\n\n      if (!offerCandidate) {\n        console.log(\"Failed to parse offer msg data\");\n        return;\n      }\n\n      switch (msg.event) {\n        case \"offer\":\n          console.log(\"Offer\");\n          pc.setRemoteDescription(offerCandidate);\n\n          try {\n            const answer = await pc.createAnswer();\n            pc.setLocalDescription(answer);\n            socket.send(\n              JSON.stringify({\n                event: \"answer\",\n                data: answer,\n              })\n            );\n          } catch (e) {\n            console.error(e.message);\n          }\n\n          return;\n        case \"candidate\":\n          console.log(\"Candidate\");\n          pc.addIceCandidate(offerCandidate);\n          return;\n        case \"info\":\n          dispatch({\n            type: \"info\",\n            viewers: msg.data.no_connections,\n          });\n      }\n    };\n  }\n\n  return (\n    <>\n      <Header></Header>\n      <MainContainer>\n        <VideoContainer>\n          <VideoPlayer src={state.stream} />\n          <VideoDetails viewers={state.viewers} />\n        </VideoContainer>\n      </MainContainer>\n    </>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { createGlobalStyle } from \"styled-components\";\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n    *{\r\n        padding: 0;\r\n        margin:0;\r\n        border: 0;\r\n        font-family: 'Poppins', sans-serif;\r\n        font-style: normal;\r\n        text-align:center;\r\n    }\r\n\r\n    body{\r\n        background-color: #1f2128;\r\n    }\r\n\r\n    .App{\r\n        text-align:center;\r\n    }\r\n\r\n    h4 {\r\n  font-weight: 500;\r\n  font-size: 32px;\r\n  line-height: 48px;\r\n  letter-spacing: -0.5px;\r\n}\r\n\r\nh6 {\r\n  font-weight: 500;\r\n  font-size: 18px;\r\n  line-height: 24px;\r\n}\r\n`;\r\n\r\nexport default GlobalStyle;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport SocketProvider from \"./context/SocketContext\";\nimport RTCProvider from \"./context/RTCPeerContext\";\nimport GlobalStyle from \"./styles/globalStyles\";\n\nReactDOM.render(\n  <>\n    <GlobalStyle />\n    <SocketProvider>\n      <RTCProvider>\n        <App />\n      </RTCProvider>\n    </SocketProvider>\n  </>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}